(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"1ScA":function(e,t,a){"use strict";a.d(t,"a",function(){return useReflowFrameClassName});var n=a("s8DI"),c=a("QtlZ"),r=a("ILQF"),i=a("g6eD"),s=a("JBtm"),o=a.n(s),u=a("ERkP"),l=a("EQxi"),f=!1;function useReflowFrameClassName(){var e="";if(!f){var t=Object(l.f)(o.a.parse(document.location.search));e=(null===t||void 0===t?void 0:t.isXSScreenSize)?"widget--xs":"",f=!0}var a=Object(u.useState)(e),s=Object(n.a)(a,2),b=s[0],d=s[1],O=Object(u.useState)(void 0),j=Object(n.a)(O,2),h=j[0],v=j[1];return Object(u.useEffect)(function(){Object(r.c)({topic:"CONDUCTOR:reflowFrame",handler:function handler(e){var t=e.data;d(function(){return t.isXSScreenSize?"widget--xs":""}),c.a.dispatch(Object(i.d)(t.isXSScreenSize)),t.clientInnerHeight&&v(function(){return t.clientInnerHeight})}})},[]),{reflowFrameCX:b,clientInnerHeight:h}}},"2uLe":function(e,t,a){"use strict";var n=a("mj2O"),c=a.n(n),r=a("7SM1"),i=a("s8DI"),s=a("8ZCy"),o=a("VkHq"),u=a("ILQF"),l=a("Hvhg"),f=a("SFoa"),b=a("2XY6"),d=a("ERkP"),O=a("uDfI"),j=a("vTYT"),h=a("hEj5");t.a=function useSetPreviewHeight(){var e=Object(h.a)(),t=Object(i.a)(e,2),a=t[0],n=t[1],v=Object(O.c)(function(e){return!!e.conversations.activeConversation}),p=Object(O.c)(l.c).showBranding,m=void 0!==p&&p,g=Object(o.a)(),w=g.privacyPolicyLinkText,E=g.noPolicy,_=Object(O.c)(function(e){return e.session.gdpr}),C=_.hasConsent,S=_.declinedConsent,k=_.needsConsent,L=Object(O.c)(b.e),y=Object(d.useCallback)(function(){var e=0,t=!m&&E,a=Object(f.m)(w);if(S&&(e-=s.b),t&&!k&&(e+=s.d),!C){var n=t?s.f:s.e;e+=s.b+n}return a&&(e-=40),e},[m,E,w,S,k,C]),T=Object(d.useCallback)(function(){return a?a.height:200},[a]),A=Object(d.useCallback)(function(e){var t=T(),a=e&&k&&S;return e&&!S&&k&&!C&&t<413?s.g:a?140:t+s.i},[S,k,C,T]);return{setChatHeight:Object(d.useCallback)(function(){var e=Object(r.a)(c.a.mark(function _callee(e){var t,a,n,r,i,o,l=arguments;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(t=l.length>1&&void 0!==l[1]&&l[1],!v||!C){c.next=3;break}return c.abrupt("return");case 3:if(a=A(e),n=y(),r=L&&!C?s.h:s.j,(i=e?a+r-n:0)!==s.a){c.next=9;break}return c.abrupt("return");case 9:o=C,Object(u.a)({topic:"set-frame-height",message:{height:"".concat(i,"px"),name:j.d.CONTROLLER,transition:o,transitionHeight:t}});case 11:case"end":return c.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[v,C,A,y,L]),setPreviewRef:n,setSliderHeight:Object(d.useCallback)(Object(r.a)(c.a.mark(function _callee2(){var e;return c.a.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:e=T(),L&&(e="calc(100% - 20px)"),Object(u.a)({topic:"set-frame-height",message:{height:"".concat(e+s.l,"px"),name:j.d.SLIDER,transition:!0,transitionHeight:!1}});case 3:case"end":return t.stop()}},_callee2)})),[T,L]),setEmailCaptureHeight:Object(d.useCallback)(Object(r.a)(c.a.mark(function _callee3(){var e;return c.a.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:e=T(),Object(u.a)({topic:"set-frame-height",message:{height:"".concat(e+s.c,"px"),name:j.d.EMAIL_CAPTURE,transition:!0,transitionHeight:!1}});case 2:case"end":return t.stop()}},_callee3)})),[T])}}},G5CQ:function(e,t,a){},SrLZ:function(e,t,a){"use strict";a.r(t);var n=a("jm9a"),c=a("mj2O"),r=a.n(c),i=a("7SM1"),s=a("s8DI"),o=a("OE2q"),u=a("O94r"),l=a.n(u),f=a("Rqwx"),b=a("fTFZ"),d=a("vkRn"),O=a("CwrG"),j=a("HXmn"),h=a("8eKL"),v=a("slYP"),p=a("BY8A"),m=a("+/Je"),g=a("Y0wo"),w=a("8ZCy"),E=a("fw6E"),_=a("1b8i"),C=a("gRD2"),S=a("+qGC"),k=a("fpJs"),L=a("Sn8X"),y=a("fJrp"),T=a("1ScA"),A=a("VkHq"),H=a("GM2V"),x=a("lE29"),N=a("swFs"),R=a("+Kbs"),I=a("nQD+"),F=a("sxX9"),P=a("pwwT"),B=a("2uLe"),V=a("2XY6"),X=a("ERkP"),D=a.n(X),M=a("uDfI"),G=(a("SwvN"),function HeaderLayout(e){var t=e.chatHidden,a=Object(x.a)(),n=a.backgroundStyles,c=a.conversationHeaderTextStyles,r=Object(M.c)(function(e){return e.session.gdpr}).hasConsent,i=Object(B.a)(),o=i.setChatHeight,u=i.setPreviewRef,f=Object(M.c)(function(e){return e.view}).chatOpen,b=Object(P.a)(),d=Object(X.useState)(Object(M.c)(V.a)),O=Object(s.a)(d,2),j=O[0],h=O[1],v=Object(y.a)(j),p=j!==v;Object(X.useLayoutEffect)(function(){f&&!t&&o(f,p)},[f,t,o,p]);var m=Object(M.c)(V.a);Object(X.useEffect)(function(){m!==j&&h(m)},[m,j]);var g=F.a[j],w=j!==F.b.CONVERSATION;return D.a.createElement("header",{className:l()("drift-widget-header",{"drift-widget-header--collapsed":w,"drift-widget-header--gdpr-consent":!r})},D.a.createElement(N.a,{style:n}),D.a.createElement("div",{className:"drift-widget-header--content content--".concat(j)},D.a.createElement(g,{previewRef:u,resetChatHeight:function resetChatHeight(){o(f,!0)}})),D.a.createElement(I.a,{onClick:b,className:"drift-widget-close","aria-label":"Close Drift Widget messenger",style:c},D.a.createElement(R.j,{width:16,height:16})))}),Q=a("ILQF"),Y=a("K7i0"),J=a("bYXQ"),U=a("Hvhg"),$=a("SFoa"),q=a("pu/X"),Z=a("da4L"),z=a("Gxm1"),K=a("LVcX"),W=a("TbSn"),ee=a("kNJ0"),te=a("oPI6"),ae=a("vTYT"),ne=a("ADGC"),ce=a("0lfv"),re=a("VpmR"),ie=a("4c+F"),se=a("HSQL"),oe=(a("sXTY"),Object(X.lazy)(function(){return a.e(47).then(a.bind(null,"f2yG"))})),ue=null,le=function ChatLayout(){var e=Object(M.b)(),t=Object(ne.c)(),a=Object(T.a)(),c=Object(X.useState)(!0),u=Object(s.a)(c,2),f=u[0],N=u[1];Object(L.a)();var R=Object(M.c)(function(e){return e.view}),I=R.chatOpen,F=R.isChatTakeover,P=Object(M.c)(U.c).showBranding,B=void 0!==P&&P,te=Object(A.a)().noPolicy,re=!B&&te;Object(X.useLayoutEffect)(function(){F&&I&&Object(Q.a)({topic:"set-frame-width-and-height",message:{className:g.a,height:w.k,max:!0,name:ae.d.CONTROLLER,width:w.k}})},[F,I]);var le=Object(M.c)(function(e){return e.conversations.activeConversation}),fe=Object(C.a)().fetchMessages,be=Object(y.a)(le),de=Object(M.c)(function(e){return e.conversations.conversations}),Oe=Object(M.c)(function(e){return e.conversations.messages}),je=Object(M.c)(function(e){return Object(K.a)({},["conversations","messages",e.conversations.activeConversation],e)}),he=Object(M.c)(function(e){return Object(K.a)(!1,["conversations","conversationStatus",e.conversations.activeConversation,"permaclosed"],e)}),ve=Object(X.useMemo)(function(){return Object(Z.s)(je)},[je]),pe=Object(M.c)(function(e){return e.campaigns.activeCampaign}),me=Object(M.c)(function(e){return e.session.gdpr}).hasConsent,ge=Object(E.a)(),we=ge.conversationHistoryOpen,Ee=ge.conversationHistoryEnabled,_e=Object(H.a)(),Ce=_e.sendTranscriptOpen,Se=_e.sendTranscriptEnabled,ke=Object(x.a)().widgetBackgroundStyles;Object(X.useEffect)(function(){(function(){var t=Object(i.a)(r.a.mark(function _callee(){var t,a,n,c,i;return r.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(t=!le||le===m.a,a=be===le,n=!!de[le]&&!!Oe[le],!(t||a||n||Object(J.e)(le))){r.next=5;break}return r.abrupt("return");case 5:return r.prev=5,r.next=8,Object(o.h)(le);case 8:c=r.sent,i=c.data,e(Object(Y.i)({conversation:i})),fe({}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(5),Object(ce.f)(q.a.MESSAGE.FETCH_MESSAGE_OR_ACTIVE_CONVO,r.t0,!0);case 17:case"end":return r.stop()}},_callee,null,[[5,14]])}));return function fetchInfoForActiveConversation(){return t.apply(this,arguments)}})()()},[le,e,fe,be,de,Oe]),Object(X.useEffect)(function(){I?(function(){var e=Object(i.a)(r.a.mark(function _callee2(){return r.a.wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)({topic:"focus-frame",message:{name:ae.d.CONTROLLER}});case 2:case"end":return e.stop()}},_callee2)}));return function focus(){return e.apply(this,arguments)}}()(),ue&&clearTimeout(ue),N(!1)):ue=setTimeout(function delaySetReflowHidden(){N(!0)},350)},[I]);var Le=Object(X.useMemo)(function(){if(!me||!I)return!1;if(pe&&pe.id&&!le){var e=!!Object(K.a)(null,["attributes","cta"],pe),t="CHAT_RESPONSE"!==Object(K.a)(null,["attributes","cta","CtaType"],pe);if(e&&t)return!1}var a=ve.length>0&&ve.length<=2&&!Object(Z.e)(ve[0]);return!F||a||ve.length>2},[pe,le,me,F,ve,I]);Object(X.useEffect)(function(){Object(se.b)("WIDGET_CHAT_FRAME.start")},[]);var ye=Object(X.useRef)(!1);Object(X.useEffect)(function(){if(!ye.current&&F&&ve.length>0){var e=Object(z.b)("post_form_takeover_tti"),t=Object(z.b)("post_form_takeover_show");e&&Object(ie.d)("Post Form Takeover TTI",e),t&&Object(ie.d)("Post Form Takeover Show",t),ye.current=!0}},[F,ve]);var Te=Object(X.useMemo)(function(){if(he)return b.a.UNAVAILABLE;var e=Object(W.a)(ve);if(!e)return b.a.AVAILABLE;var t=Object(ee.a)(-2,ve),a=Object(Z.e)(t)&&Object(Z.i)(e);return Object(Z.e)(e)||a||Object(Z.j)(e)?b.a.UNAVAILABLE_BUTTONS:Object(Z.o)(e)||Object(Z.o)(t)&&Object(Z.i)(e)?b.a.AVAILABLE_BUTTONS:b.a.AVAILABLE},[ve,he]),Ae=Te===b.a.AVAILABLE||Te===b.a.AVAILABLE_BUTTONS,He=Object(_.a)(ve,le),xe=Object(X.useMemo)(function(){return Object(Z.c)(He)},[He]),Ne=Object(S.b)(He),Re=Object(S.a)(He),Ie=!Object(ce.m)(Ne)&&Object(ce.m)(Re),Fe=Object(X.useMemo)(function(){return D.a.createElement(h.a,{messageGroups:xe,messages:He,reflowHidden:f,disabled:we})},[xe,He,f,we]),Pe=Object(k.a)(),Be=me&&(!!le||F),Ve=!Le||!Ae,Xe=Object(M.c)(V.a),De=Object(A.a)().privacyPolicyLinkText,Me=Object($.m)(De);return D.a.createElement("div",{className:l()("drift-widget-chat-layout",Object(n.a)({"drift-widget-chat-layout__takeover":F&&!t},a.reflowFrameCX,!!a)),"aria-live":"polite"},D.a.createElement(p.a,null),D.a.createElement("div",{className:l()("drift-widget-chat-wrapper","drift-widget-chat-wrapper__".concat(Xe),{"drift-widget-chat-wrapper__open":I,"drift-widget-chat-wrapper__closed":!I,"drift-widget-chat-wrapper__reflow-hidden":f,"drift-widget-chat-wrapper__active-conversation":Be,"drift-widget-chat-wrapper__no-footer-content":re&&Ve,"drift-widget-chat-wrapper__mobile":t,"drift-widget-chat-wrapper__conversation-history":we,"drift-widget-chat-wrapper__large-footer":Me})},D.a.createElement(G,{chatHidden:f}),!F&&Ee&&D.a.createElement(d.a,null),!F&&Se&&D.a.createElement("div",{className:l()("drift-widget-send-transcript-container",{"drift-widget-send-transcript-container--open":Ce}),"aria-hidden":!Ce},Ce&&D.a.createElement(oe,{key:Ce.toString()})),Be&&D.a.createElement("div",{className:l()("drift-widget-message-history",{"drift-widget-message-history--with-footer":Pe,"drift-widget-message-history--no-composer":Ve}),style:ke},Fe,0===ve.length&&D.a.createElement(j.a,{titleId:"ChatLayoutLoading"})),D.a.createElement("div",{className:"drift-widget-chat-bottom"},Le&&D.a.createElement(b.b,{chatHidden:f,disabled:we||Ce}),!(we||Ce)&&D.a.createElement(O.a,null)),le&&Ie&&D.a.createElement(v.a,{message:Ne})))};t.default=function(e){var t=Object(X.useState)(!1),a=Object(s.a)(t,2),n=a[0],c=a[1],o=Object(M.c)(function(e){return e.view.initComplete}),u=Object($.f)();return Object(X.useEffect)(function(){o&&!n&&function(){var e=Object(i.a)(r.a.mark(function _callee3(){return r.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(re.b)(u);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(ce.n)({data:["i18n failed to load - ".concat(e.t0.message),e.t0],type:"warn",internal:!0});case 8:c(!0);case 9:case"end":return e.stop()}},_callee3,null,[[0,5]])}));return function runAsync(){return e.apply(this,arguments)}}()()},[o,n,u]),D.a.createElement(te.a,{"aria-live":"polite"},o&&n?D.a.createElement(le,e):D.a.createElement(f.a,null))}},SwvN:function(e,t,a){},sXTY:function(e,t,a){},swFs:function(e,t,a){"use strict";var n=a("ERkP"),c=a.n(n);a("G5CQ");t.a=function TopLine(e){var t=e.style;return c.a.createElement("div",{className:"drift-widget-header-top-line",style:t})}}}]);