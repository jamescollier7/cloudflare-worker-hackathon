(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"3y+j":function(e,t,n){},HXmn:function(e,t,n){"use strict";var c=n("jm9a"),a=n("O94r"),o=n.n(a),i=n("ERkP"),r=n.n(i);n("yhQp");t.a=function LoaderBalls(e){var t=e.className,n=e.size,a=void 0===n?"medium":n,i=e.visible,s=void 0===i||i,l=e.titleId,d="loaderBallTitle_".concat(l);return r.a.createElement("div",{"aria-live":"polite",className:o()("drift-widget-loader-balls drift-widget-loader-balls--".concat(a),Object(c.a)({"drift-widget-loader-balls--visible":s},t,!!t))},r.a.createElement("svg",{"aria-labelledby":d,viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg",role:"img"},r.a.createElement("title",{id:d},"Processing... please wait"),r.a.createElement("circle",{cx:"10",cy:"20",r:"9"}),r.a.createElement("circle",{cx:"40",cy:"20",r:"9"}),r.a.createElement("circle",{cx:"70",cy:"20",r:"9"})))}},NJR1:function(e,t,n){},Rqwx:function(e,t,n){"use strict";var c=n("HXmn"),a=n("ERkP"),o=n.n(a),i=n("uDfI");n("VSUx");t.a=function ChatLoader(){var e=Object(i.c)(function(e){return e.view.chatOpen});return o.a.createElement("div",{className:"drift-widget-chat-layout-loader"},o.a.createElement(c.a,{className:"drift-widget-chat-layout-loader--loader-balls",visible:e,titleId:"ChatLoader"}))}},VSUx:function(e,t,n){},"ab+K":function(e,t,n){"use strict";var c=n("/UYI"),a=n("nQD+"),o=n("Za8o"),i=n("LwEI"),r=n("ERkP"),s=n.n(r);n("NJR1");t.a=function MessageCloseButton(e){var t=e.onClick,n=e.shouldFocus,l=void 0!==n&&n,d=Object(i.a)(),u=Object(r.useRef)(null);Object(o.a)(u,l);return s.a.createElement(a.a,{onClick:function handleOnClick(e){(null===u||void 0===u?void 0:u.current)&&(null===u||void 0===u||u.current.blur()),t(e)},ref:u,className:"drift-widget-message-close-button drift-widget-close-button--align-".concat(d),"aria-label":"Close Drift Widget messenger preview overlay"},s.a.createElement(c.a,{width:10,height:10}))}},dT9Q:function(e,t,n){"use strict";var c=n("s8DI"),a=n("BA/U"),o=n("ab+K"),i=n("7oh4"),r=n("nedb"),s=n("Erxq"),l=n("58kB"),d=n("hEj5"),u=n("IJKc"),b=n("LwEI"),f=n("SsZN"),O=n("vjCh"),j=n("qixE"),g=n("xwTo"),m=n("da4L"),v=n("+f1A"),h=n("X9/c"),p=n("g6eD"),E=n("2XY6"),w=n("i9gz"),C=n("RhEL"),k=n("LVcX"),S=n("ERkP"),I=n.n(S),A=n("uDfI"),y=n("vTYT"),R=n("PjZB"),_=n("y0on"),N=n("4c+F");n("pUpc");t.a=function MessagePreview(){var e=Object(d.a)(),t=Object(c.a)(e,2),n=t[0],D=t[1],L=Object(A.b)(),P=Object(S.useState)(null),T=Object(c.a)(P,2),M=T[0],x=T[1],J=Object(A.c)(function(e){return e.conversations}).activeConversation,U=Object(A.c)(function(e){return e.session.gdpr}),B=Object(u.a)(),F=Object(r.a)(),W=Object(A.c)(E.g),H=Object(A.c)(v.g),G=Object(A.c)(g.d),V=Object(A.c)(v.j),Z=Object(A.c)(v.n),K=Object(A.c)(function(e){return e.view.chatOpen}),X=!K&&!W,Q=Object(b.a)(),z=Object(l.a)(M?M.authorId:null).recipient,q=Object(S.useMemo)(function(){return!(U.declinedConsent||!M||!M.body||K||X||(null===M||void 0===M?void 0:M.viewerRecipientStatus)===R.f.READ)},[U.declinedConsent,M,K,X]);Object(S.useEffect)(function setLatestMessageFromConvo(){if(Object(w.a)(B))x(null);else{var e=B.pop()||{};M&&Object(C.a)(e.id,M.id)||x(Object(m.t)(e,100))}},[B]),Object(S.useLayoutEffect)(function updateFrameSize(){if(q){var e=n?n.width:0,t=n?n.height:0,c=e+i.b+40,a=t+36;Object(h.c)(a,c)}},[n,q]);var Y=Object(s.a)(M);if(!q)return null;var $=function dismiss(){M&&(Object(j.d)(J),x({}),Object(h.b)(),ee())},ee=function dismissPlaybookIfNotInteracted(){if(!Object(g.k)()){var e=Object(k.a)(null,["attributes","playbookId"],F);if(Object(f.o)(M),Object(O.k)(F.id,e),!G){var t=V===Z;Object(N.c)("Playbook Dismissed",{campaignId:F.id,playbookId:e,endUserId:H,isEndUserFirstVisit:t,isInEngagementEAP:!1,clickedElement:"preview"})}}},te=function openChat(){if(Object(h.b)(),Y){var e=Object(k.a)(null,["attributes","playbookId"],F);if(Object(f.n)(M),Object(O.k)(F.id,e),!G){var t=V===Z;Object(N.c)("Playbook Clicked",{campaignId:F.id,playbookId:e,endUserId:H,isEndUserFirstVisit:t,isInEngagementEAP:!1,clickedElement:"preview"})}}L(Object(p.f)({chatOpen:!0}))},ne=Object(m.b)(M),ce=Object(_.a)(z.name,ne);return W?I.a.createElement("div",{className:"drift-widget-message-preview-wrapper",key:"".concat(M.id,"-preview-box")},I.a.createElement("div",{className:"drift-widget-message-preview drift-widget-message-preview--align-".concat(Q)},Q===y.b.RIGHT&&I.a.createElement(o.a,{onClick:$}),I.a.createElement("div",{onClick:te,onKeyDown:Object(a.a)(te),className:"drift-widget-message-preview-text drift-widget-message-preview-text--align-".concat(Q),"aria-label":"".concat(ce?ce+" - ":"","Open chat"),"aria-live":"polite",tabIndex:0,role:"button"},I.a.createElement("span",{ref:D},ne)),Q===y.b.LEFT&&I.a.createElement(o.a,{onClick:$}))):null}},g3yi:function(e,t,n){"use strict";var c=n("nfbA"),a=n("efbE"),o=n("LeJ0"),i=function getDefaultAuthParams(e){return{embed_id:e,client_id:o.a.CLIENT_ID,consent_id:"has_consent"}};n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s});var r=function executeWidgetBootstrapForMode(e,t){switch(e){case"LANDING_PAGE":return d(t);case"CHAT":default:return l(t)}},s=function executeBootstrapPing(e){return a.b.post("widget_bootstrap/ping/v2",{data:{ping_context:e}})},l=function widgetBootstrap(e){var t=i(e.embed_id);return a.b.post("widget_bootstrap",{data:Object(c.a)(Object(c.a)({},t),e)})},d=function landingPageBootstrap(e){var t=i(e.embed_id);return a.b.post("widget_bootstrap/landing_page",{data:Object(c.a)(Object(c.a)({},t),e)})}},pUpc:function(e,t,n){},xKh3:function(e,t,n){"use strict";n.d(t,"b",function(){return E}),n.d(t,"a",function(){return w});var c=n("mj2O"),a=n.n(c),o=n("7SM1"),i=n("uIJS"),r=n("wQh9"),s=n("LeJ0"),l=n("QtlZ"),d=n("xwTo"),u=n("mJgV"),b=n("qwiD"),f=n("NsjZ"),O=n("ADGC"),j=n("+D5C"),g=n("0lfv"),m=n("76KI"),v=n("l+Xe"),h=n("JelZ"),p=new(function(){function RefetchMessagesState(){Object(i.a)(this,RefetchMessagesState),this.isJoinAfterConnectionLost=void 0,this.reconnectAttempts=void 0,this.rejoinAttempts=void 0,this.closeCode=void 0,this.isJoinAfterConnectionLost=!1,this.reconnectAttempts=0,this.rejoinAttempts=0,this.closeCode=0}return Object(r.a)(RefetchMessagesState,[{key:"shouldRefetchMessagesOnChannelJoin",value:function shouldRefetchMessagesOnChannelJoin(){return this.isJoinAfterConnectionLost}},{key:"onSocketDisconnect",value:function onSocketDisconnect(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e>999&&(this.closeCode=e),this.isJoinAfterConnectionLost=!0}},{key:"resetStateOnJoin",value:function resetStateOnJoin(){this.isJoinAfterConnectionLost=!1,this.reconnectAttempts=0,this.rejoinAttempts=0,this.closeCode=0}},{key:"setAttempt",value:function setAttempt(e,t){"rejoin"===e?this.rejoinAttempts=t:"reconnect"===e&&(this.reconnectAttempts=t)}}]),RefetchMessagesState}()),E=function OpenSocket(e){var t=e.session_token,n=e.org_id,c=e.socketCluster,a=e.ip,o="is_mobile_".concat(Object(O.c)(!0)),i=s.a.WS_PROTOCOL,r="LOCAL"===s.a.WS_USER_ENV?"":"".concat(n,"-"),d=Object(u.a)(l.a.getState()),b=Object(h.a)(n),v=d.includes(b.toString()),E=Object(m.a)("has_socket_long_polling"),w=v||E,k=C(n,r,c),S="".concat(i,"://").concat(k,"/ws"),I=new f.b(S,{params:{session_token:t,remote_ip:a},timeout:1e4,reconnectAfterMs:function reconnectAfterMs(e){return p.setAttempt("reconnect",e),[1e3,2e3,5e3,1e4][e-1]||1e4},rejoinAfterMs:function rejoinAfterMs(e){return p.setAttempt("rejoin",e),[1e3,2e3,5e3][e-1]||1e4}});return I.connect(),I.onError(function(e,t,o){var i=!1,r=!1;w&&t===WebSocket&&p.reconnectAttempts>4?(I.replaceTransport(f.a),I.connect(),i=!0):w&&t===f.a&&(I.replaceTransport(WebSocket),I.connect(),r=!0),c===j.c.CHAT&&(E&&Object(g.n)({data:["ERROR - chat cluster disconnected on org: ".concat(n,", on IP: ").concat(a),"is_mobile_".concat(Object(O.c)(!0)),"Used Long Poll Transport: ".concat(i),"Used Round Robin back to WS Transport: ".concat(r),"establishedConnections: ".concat(o),"Attempts to Rejoin: ".concat(p.rejoinAttempts),"Attempts to Reconnect: ".concat(p.reconnectAttempts)],internal:!0}),p.onSocketDisconnect())}),I.onClose(function(e){var t=null===e||void 0===e?void 0:e.code;c===j.c.CHAT&&(E&&Object(g.n)({data:["CLOSE - chat cluster closed on org: ".concat(n,", on IP: ").concat(a),o],internal:!0}),p.onSocketDisconnect(t),I.isConnected()&&"closed"!==I.connectionState()&&1e3!==t||(Object(g.n)({data:["WS Reconnect - attempting to reconnect to chat cluster ".concat(n,", IP: ").concat(a," after close code ").concat(t),"Socket Status: isConnected: ".concat(I.isConnected(),", connectionState: ").concat(I.connectionState()),o]}),p.setAttempt("reconnect",1),I.connect()))}),I},w=function(){var e=Object(o.a)(a.a.mark(function _callee2(e){var t,n,c,i;return a.a.wrap(function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return t=e.channelName,n=e.socket,c=e.events,i=new Promise(function(){var e=Object(o.a)(a.a.mark(function _callee(e,o){var i;return a.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:i=n.channel(t),c.forEach(function(e){var t=e.topic,n=e.event;i.on(t,n)}),i.join().receive("ok",function(){if(Object(d.k)()&&p.shouldRefetchMessagesOnChannelJoin()&&t.startsWith(j.b.USER)){Object(g.n)({data:["joined user channel ".concat(t," after disconnect and user interacted with active conversation"),"is_mobile_".concat(Object(O.c)(!0))],internal:!0});var n=Object(m.a)("messages_refetch")||1e3===p.closeCode;l.a.dispatch(Object(b.x)({channel:j.b.USER,shouldRefetchMessagesForActiveConversation:n})),p.resetStateOnJoin()}e({channel:i})}).receive("error",function(e){Object(g.n)({data:["Error connecting to channel: ".concat(t)]}),o(e)}).receive("timeout",function(e){Object(g.n)({data:["Joining the ".concat(t," channel timed out. ")]})});case 3:case"end":return a.stop()}},_callee)}));return function(t,n){return e.apply(this,arguments)}}()),r.abrupt("return",i);case 3:case"end":return r.stop()}},_callee2)}));return function JoinChannel(t){return e.apply(this,arguments)}}(),C=function _resolveSocketBaseForType(e,t,n){switch(n){case j.c.CHAT:return"".concat(Object(v.d)(e));case j.c.USER:return s.a.WS_USER_BASE;case j.c.PRESENCE:return"".concat(t).concat(Object(v.c)(e));case j.c.VISITOR_PRESENCE:return s.a.WS_VISITOR_PRESENCE_BASE;default:return""}}},yXOZ:function(e,t,n){"use strict";var c=n("s8DI"),a=n("BA/U"),o=n("O94r"),i=n.n(o),r=n("+Kbs"),s=n("yEsl"),l=n("hSLT"),d=n("nedb"),u=n("mZ4K"),b=n("UvQv"),f=n("fL0f"),O=n("Za8o"),j=n("Erxq"),g=n("tLIi"),m=n("hhdZ"),v=n("58kB"),h=n("lE29"),p=n("cwuI"),E=n("IJKc"),w=n("LwEI"),C=n("Hnjx"),k=n("SsZN"),S=n("vjCh"),I=n("ILQF"),A=n("xwTo"),y=n("Hvhg"),R=n("+f1A"),_=n("g6eD"),N=n("2XY6"),D=n("LVcX"),L=n("i9gz"),P=n("0B8E"),T=n("ERkP"),M=n.n(T),x=n("Tr4L"),J=n("uDfI"),U=n("ADGC"),B=n("MFhO"),F=n("4c+F"),W=n("1kux"),H=(n("3y+j"),"SENDER"),G="MEGAPHONE",V="THEME_ICON";t.a=function WidgetIcon(){var e=Object(T.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1],Z=Object(T.useRef)(null);Object(O.a)(Z,n);var K=Object(b.a)(),X=K.isDisabled,Q=K.setIsDisabled,z=Object(J.b)(),q=Object(x.a)().t,Y=Object(J.c)(function(e){return e.view.chatOpen}),$=Object(J.c)(function(e){return e.session.gdpr}),ee=$.hasConsent,te=$.declinedConsent,ne=Object(J.c)(y.s),ce=Object(J.c)(N.g),ae=!ce&&!Y,oe=Object(J.c)(function(e){return!!e.conversations.activeConversation}),ie=Object(w.a)(),re=Object(d.a)(),se=Object(J.c)(R.g),le=Object(J.c)(A.d),de=Object(J.c)(R.j),ue=Object(J.c)(R.n),be=Object(J.c)(function(e){return Object(D.a)(!1,["embed","configuration","theme"],e)}).unreadBadgeEnabled,fe=Object(E.a)(),Oe=Object(J.c)(function(e){return e.view.isChatTakeover}),je=Object(J.c)(function(e){return e.conversations}).activeConversation,ge=Object(m.a)(je),me=Object(g.a)(),ve=Object(L.a)(me)?ge:me,he=Object(j.a)(ve),pe=Object(h.a)(),Ee=pe.backgroundStyles,we=pe.widgetSecondaryColor,Ce=Object(p.a)(),ke=Ce.Icon,Se=Ce.customIcon,Ie=Ce.hasCustomIcon,Ae=Object(u.a)(),ye=Object(l.a)().type,Re=Ae||Object(D.a)(void 0,["authorId"],ve),_e=Object(v.a)(Re).recipient,Ne=fe?Object(P.a)(fe).length:0,De=ye===B.a.SLIDER,Le=Re&&(De||Ne>0),Pe=Object(f.a)(["titleNotificationEnabled"]),Te=Object(c.a)(Pe,1)[0],Me=void 0!==Te&&Te,xe=Object(T.useMemo)(function(){return Le?H:De&&!Re?G:V},[Re,De,Le]),Je=Object(C.a)();Object(T.useEffect)(function(){Me&&Object(I.a)({topic:"page-notification-update",message:{totalUnreadMessages:Ne,pageTitleNotificationMsg:q("titleNotifier.newMessageNotification")}})},[Ne,Me,q,ae]),Object(T.useEffect)(function(){X&&!De&&Q(!1)},[X,De,Q]),Object(T.useEffect)(function(){ae||ne||Object(I.a)({topic:"toggle-widget-controller",message:{isChatTakeover:Oe,chatOpen:Y,hasActiveConversation:oe&&ee}})},[Y,ee,oe,Oe,ae,ne]),Object(T.useEffect)(function(){fe&&fe.length>0&&!ae&&Object(W.a)()},[ae,fe]),Object(T.useEffect)(function(){Object(I.c)({topic:"CONDUCTOR:focusWidgetIcon",handler:function handler(){return o(!0)}})},[]);var Ue=function onToggleChat(){if(!Y&&Ne>0&&he){var e=Object(D.a)(null,["attributes","playbookId"],re);if(Object(S.k)(re.id,e),Object(k.n)(ve),Object(k.p)(ve),!le){var t=de===ue;Object(F.c)("Playbook Clicked",{campaignId:re.id,playbookId:e,endUserId:se,isEndUserFirstVisit:t,isInEngagementEAP:!1,clickedElement:"icon"})}}!function toggle(e){if(De)Object(I.a)({topic:"slider:showDetails",message:{}}),Q(!0);else{var t=!ee&&!te;z(Object(_.f)({chatOpen:e,gdprDismissed:t}))}e&&Object(I.a)({topic:"reset-controller-size"})}(!Y)},Be=Object(T.useMemo)(function(){return!Ie||Le||Y?null:Se},[Se,Le,Y,Ie]),Fe=Object(T.useMemo)(function(){if(Y)return _e.name!==q("agent")?"Close chat with ".concat(_e.name," in the Drift Widget messenger"):"Close Drift Widget messenger";var e=_e.name!==q("agent")?"Open chat with ".concat(_e.name," in the Drift Widget messenger"):"Open Drift Widget messenger";return be&&Ne>0?"".concat(e," - Unread messages: ").concat(Ne):e},[Y,_e.name,q,be,Ne]);return ce?M.a.createElement(M.a.Fragment,null,M.a.createElement("style",null,"\n          :root {\n            --bgColor:".concat(Ee.background,";\n            --bgColorHover:").concat(Ee.backgroundOnHover,";\n          }\n        ")),M.a.createElement("div",{className:i()("drift-widget-controller drift-widget-controller--align-".concat(ie),[Je],{"drift-widget-controller--closed":!Object(U.c)()&&Y,"drift-widget-controller--custom-icon":Ie,"drift-widget-controller--avatar":Le,"drift-widget-controller--hide":Oe,"drift-widget-controller--disabled":X}),onClick:Ue,"aria-label":Fe,"aria-disabled":X,"aria-hidden":X,role:"button",tabIndex:X?-1:0,onKeyDown:Object(a.a)(Ue),ref:Z},M.a.createElement("div",{className:i()("drift-widget-controller-icon",[Je],{"drift-widget-controller-icon--default":Ie&&!Le&&!Y}),style:Be},M.a.createElement("div",{className:"drift-controller-icon--active"},xe===G&&M.a.createElement(r.n,{fill:we}),xe===H&&M.a.createElement(s.a,{className:i()([Je],"drift-controller-icon--avatar"),avatarClassName:i()([Je],"drift-controller-icon--avatar-avatar"),id:Re}),xe===V&&!Ie&&ke),M.a.createElement("div",{className:"drift-controller-icon--close",style:{backgroundColor:we}})),be&&Ne>0&&M.a.createElement("div",{className:"drift-controller-icon-unread"},Math.min(Ne,99)))):null}},yhQp:function(e,t,n){},zcvD:function(e,t,n){"use strict";var c=n("O94r"),a=n.n(c),o=n("fTFZ"),i=(n("vkRn"),n("CwrG")),r=n("8eKL"),s=n("slYP"),l=n("1b8i"),d=n("+qGC"),u=n("fpJs"),b=n("xwTo"),f=n("da4L"),O=n("i9gz"),j=n("ERkP"),g=n.n(j),m=n("uDfI");t.a=function LandingPageMessageView(e){var t=e.hasGdprConsent,n=Object(u.a)(),c=Object(m.c)(b.i),v=Object(m.c)(b.a),h=Object(l.a)(c,v),p=Object(j.useMemo)(function(){return Object(f.c)(h)},[h]),E=Object(d.b)(h),w=v&&!!E;return g.a.createElement(g.a.Fragment,null,!1," ",g.a.createElement("div",{className:a()("drift-widget-message-history",{"drift-widget-message-history--with-footer":n})},g.a.createElement(r.a,{messageGroups:p,messages:h,reflowHidden:!1,disabled:!1,inheritBackgroundStyle:!0,showTimestampForFirstGroup:!1})),w&&g.a.createElement("div",{className:"drift-widget-landingpage-bottom"},g.a.createElement(s.a,{message:E})),!w&&!Object(O.a)(c)&&g.a.createElement("div",{className:"drift-widget-landingpage-bottom"},t&&g.a.createElement(o.b,{disabled:!1,alwaysShow:!0,chatHidden:!1,alwaysShowSendAction:!0,useGifPicker:!1}),g.a.createElement(i.a,null)))}}}]);